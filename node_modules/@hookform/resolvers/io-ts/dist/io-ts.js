var e=require("fp-ts/lib/Either"),t=require("fp-ts/function"),n=require("@hookform/resolvers"),r=require("io-ts"),o=require("fp-ts/ReadonlyArray"),i=require("fp-ts/Option"),u=require("fp-ts/Either"),a=require("fp-ts/Semigroup"),p=require("fp-ts/ReadonlyRecord");function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){return e.reduce(function(e,n,r){return t.pipe(n,u.fold(function(e){return(r>0?".":"")+e},function(e){return"["+e+"]"}),function(t){return""+e+t})},"")},c=function(e){var n,a=t.pipe(n=e.context,o.filterMapWithIndex(function(e,t){var o=e-1;return void 0===n[o]||n[o].type instanceof r.TaggedUnionType||n[o].type instanceof r.UnionType||n[o].type instanceof r.IntersectionType?i.none:i.some(t)}),o.map(function(e){return e.key}),o.map(function(e){return t.pipe(e,function(e){return parseInt(e,10)},u.fromPredicate(t.not(Number.isNaN),function(){return e}))}),o.toArray,s);return{message:t.pipe(e.message,u.fromNullable(e.context),u.mapLeft(t.flow(o.last,i.map(function(e){return"expected "+e.type.name+" but got "+JSON.stringify(e.actual)}),i.getOrElseW(function(){return t.absurd("Error context is missing name")}))),u.getOrElseW(t.identity)),type:t.pipe(e.context,o.last,i.map(function(e){return e.type.name}),i.getOrElse(function(){return"unknown"})),path:a}},l=function(e){return t.pipe(e,o.map(function(e){var t;return(t={})[e.path]={type:e.type,message:e.message},t}),function(e){return a.fold({concat:function(e,t){return Object.assign({},t,e)}})({},e)})},m={concat:function(e,t){var n;return f({},t,{types:f({},e.types,(n={},n[e.type]=e.message,n[t.type]=t.message,n))})}},y=function(e){return t.pipe(p.fromFoldableMap(m,o.Foldable)(e,function(e){return[e.path,e]}),p.map(function(e){return function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(e,["path"])}))};exports.ioTsResolver=function(r){return function(i,u,a){return t.pipe(i,r.decode,e.mapLeft((p=!a.shouldUseNativeValidation&&"all"===a.criteriaMode,function(e){var n=p?y:l;return t.pipe(e,o.map(c),n)})),e.mapLeft(function(e){return n.toNestError(e,a)}),e.fold(function(e){return{values:{},errors:e}},function(e){return{values:e,errors:{}}}));var p}};
//# sourceMappingURL=io-ts.js.map
